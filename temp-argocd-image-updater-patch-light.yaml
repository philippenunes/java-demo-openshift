# ðŸ”„ PATCH PARA HABILITAR IMAGE UPDATER COM RECURSOS MENORES
spec:
  # Image Updater Configuration
  extraConfig:
    application.instanceLabelKey: argocd.argoproj.io/instance
  
  # Adicionar Image Updater como sidecar
  repo:
    sidecarContainers:
    - name: argocd-image-updater
      image: quay.io/argoproj/argocd-image-updater:v0.12.2
      command:
      - /usr/local/bin/argocd-image-updater
      - run
      env:
      - name: APPLICATIONS_API
        value: argocd
      - name: ARGOCD_GRPC_WEB
        value: "true"
      - name: ARGOCD_SERVER
        value: localhost:8080
      - name: ARGOCD_INSECURE
        value: "true"
      - name: ARGOCD_PLAINTEXT
        value: "true"
      - name: IMAGE_UPDATER_KUBE_EVENTS
        value: "true"
      - name: LOG_LEVEL
        value: info
      resources:
        requests:
          cpu: 10m
          memory: 32Mi
        limits:
          cpu: 50m
          memory: 64Mi